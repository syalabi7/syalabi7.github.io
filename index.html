<!doctype html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>The Wedding of Ayuna & Syalabi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Great+Vibes&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

<!-- COVER -->
<section class="cover" id="cover">
    <div class="cover-inner">
        <div class="cover-inner">
            <p class="wedding-of">The Wedding of</p>
            <h1>Ayuna & Syalabi</h1>

            <div class="guest-wrapper">
                <p class="guest-label">Kepada Yth. Bapak/Ibu/Saudara/i</p>
                <p id="guestName" class="guest-name">Tamu Undangan</p>
            </div>

            <button id="openBtn">Buka Undangan</button>
        </div>
    </div>
</section>

<section class="content" id="content">

    <div class="section opening">
        <h2>Assalamuâ€™alaikum Warahmatullahi Wabarakatuh</h2>
        <p>
            Dengan memohon rahmat dan ridho Allah SWT, kami bermaksud
            mengundang Bapak/Ibu/Saudara/i untuk hadir dalam acara
            pernikahan kami.
        </p>
    </div>

    <div class="section couple">
        <div class="person">
            <img src="assets/img/ayuna.jpg" class="photo">
            <h4>Ayuna Widya Silviana Sari</h4>
            <p>Putri dari Bapak Yaji & <br>Ibu Wiji</p>
        </div>

        <span class="and">&amp;</span>

        <div class="person">
            <img src="assets/img/syalabi.jpg" class="photo">
            <h4>Ahmad Syalabi Mahmud</h4>
            <p>Putra dari Bapak H.M. Nur Syahid (Alm.) & <br>Ibu Makhinunik (Almh.)</p>
        </div>
    </div>

    <div class="section event">
        <h3>Detail Acara</h3>

        <div class="event-card">
            <h4>Akad Nikah</h4>
            <p><strong>Minggu, 4 Januari 2026</strong></p>
            <p>Pukul 08.00 WIB</p>
            <p>Rumah Mempelai Wanita</p>
            <p>Dusun Ngumpul, RT/RW. 003/001, Desa Ngumpul, Kec. Bagor, Nganjuk</p>
        </div>

        <div class="event-card">
            <h4>Temu Manten & Walimatul Ursy</h4>
            <p><strong>Minggu, 4 Januari 2026</strong></p>
            <p>Pukul 10.00 WIB - Selesai</p>
            <p>Rumah Mempelai Wanita</p>
            <p>Dusun Ngumpul, RT/RW. 003/001, Desa Ngumpul, Kec. Bagor, Nganjuk</p>
        </div>
    </div>

    <div class="section location">
        <h3>Lokasi Acara</h3>

        <div class="map-card">
            <iframe 
                src="https://www.google.com/maps?q=-7.578694,111.843083&z=17&output=embed"
                allowfullscreen
                loading="lazy">
            </iframe>

            <a href="https://maps.google.com/?q=-7.578694,111.843083" 
            target="_blank" class="map-btn">
                Buka di Google Maps
            </a>
        </div>
    </div>

    <div class="section countdown">
        <h3>Menuju Hari Bahagia</h3>

        <p class="countdown-date">
            Minggu, 4 Januari 2026
        </p>

        <div class="countdown-box">
            <div><span id="days">0</span><small>Hari</small></div>
            <div><span id="hours">0</span><small>Jam</small></div>
            <div><span id="minutes">0</span><small>Menit</small></div>
            <div><span id="seconds">0</span><small>Detik</small></div>
        </div>
    </div>

    <div class="section guestbook">
        <h3>Ucapan & Doa</h3>

        <div class="guestbook-card">
            <input type="text" id="gb-name" placeholder="Nama">
            <textarea id="gb-message" placeholder="Tulis ucapan & doa..."></textarea>
            <button id="gb-send">Kirim Ucapan</button>
        </div>

        <div id="gb-list"></div>
    </div>

</section>

<script src="assets/js/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL = "https://ubfujpsrnjzgubgpnjmk.supabase.co";
const SUPABASE_KEY = "sb_publishable_7Us7i0EYW4mGZ14xnSiP8Q_NuCMt5mT";

const sb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

document.getElementById('gb-send').addEventListener('click', async ()=>{
    const name = document.getElementById('gb-name').value.trim();
    const message = document.getElementById('gb-message').value.trim();

    if(!name || !message){
        alert("Nama dan ucapan tidak boleh kosong");
        return;
    }

    const { error } = await sb.from('guestbook').insert([{ name, message }]);

    if(error){
        alert("Gagal mengirim ucapan ðŸ˜¥");
        console.log(error);
    }else{
        alert("Ucapan terkirim ðŸ’™");
        document.getElementById('gb-name').value = "";
        document.getElementById('gb-message').value = "";
    }
});
</script>
<script>
async function loadGuestbook(){
    const { data, error } = await sb
      .from('guestbook')
      .select('*')
      .order('created_at', { ascending: false })
      .limit(10);

    if(error){
        console.log(error);
        return;
    }

    const list = document.getElementById('gb-list');
    list.innerHTML = "";

    data.forEach(row => {
        list.innerHTML += `
            <div class="guestbook-item">
                <strong>${row.name}</strong>
                <p>${row.message}</p>
            </div>
        `;
    });
}

loadGuestbook();
</script>

</body>
</html>
